<div *ngIf="currentTask" class="edit-form">
  <h4>Task</h4>
  <form>
    <div class="form-group">
      <label for="name" class="control-label">Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        [(ngModel)]="currentTask.name"
        name="name"
        (click)="onNameChange()"
      />
      <div *ngIf="isNameEmpty" class="invalid-feedback">
        <div>Name is required</div>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input
        type="text"
        class="form-control"
        id="description"
        [(ngModel)]="currentTask.description"
        name="description"
      />
    </div>

    <div class="form-group">
      <label for="deadline">Deadline</label>
      <input
        type="text"
        class="form-control"
        id="deadline"
        [(ngModel)]="currentTask.deadline"
        name="deadline"
        (click)="onDeadlineChange()"
      />
      <div *ngIf="isDeadlineEmpty" class="invalid-feedback">
        <div>Deadline is required</div>
      </div>
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <select class="form-select form-control" #category (change)="setActiveCategory(category.value, i)">
        <option
          class="list-group-item"
          *ngFor="let category of categories; let i = index"
          (change)="setActiveCategory(category, i)"
          [value]="i"
          [selected]="category.id == currentCategoryId"
        >
          {{ category.name }}
        </option>
      </select>
    </div>
  </form>

  <button class="badge badge-danger mr-2" (click)="deleteTask()">
    Delete
  </button>

  <button type="submit" class="badge badge-success" (click)="updateTask()">
    Update
  </button>
  <p>{{ message }}</p>
</div>

<div *ngIf="!currentTask">
  <br />
  <p>Cannot access this Task...</p>
</div>
